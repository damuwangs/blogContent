---
title: "Javascript - 闭包"
date: "2021-06-21"
tags: [编程]
categories: 前端
---

# 概念

- ## 变量的作用域

  要理解闭包，首先必须理解Javascript特殊的变量作用域

  变量的作用域无非就是两种：全局变量和局部变量

  Javascript语言的特殊之处，就在于函数内部可以直接读取全局变量

  ```
  var n=999
  function f1(){
  	alert(n)
  }
  f1() // 999
  ```

  在函数外部无法读取函数内的局部变量

  ```
  function f1(){
  	var n=999
  }
  alert(n); // error
  ```

- ## 闭包的描述

  闭包就是能够读取其他函数内部变量的函数

  由于在Javascript语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成"定义在一个函数内部的函数"

  所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁，f2函数，就是闭包

  ```
  function f1(){
  	var n=999
  	function f2(){
      	alert(n)
      }
  　　return f2
  }
  var result = f1()
  result() // 999
  ```

- ## 闭包优缺点

  优点：

  1. 希望一个变量长期驻扎在内存中

  2. 避免全局变量的污染

  3. 私有成员的存在

     

  缺点：闭包会使变量始终保存在内存中，如果不当使用会增大内存消耗

# 应用场景

- 匿名自执行函数
- 结果缓存
- 模块化代码，减少全局变量的污染
- 封装
- 实现类和继承
- setTimeout传参
- 为节点循环绑定click事件

# 参考资料

> http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html
>
> https://segmentfault.com/a/1190000000652891
>
> https://www.cnblogs.com/yunfeifei/p/4019504.html
>
> https://juejin.cn/post/6844903910902087688